
<!DOCTYPE html>
<html style="width: 100%; height: 100%; margin: 0; padding: 0;">
	<head>
		<meta charset="utf-8">
		<title>PlanGen</title>
		<script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r125/three.min.js"></script>
		<script src="https://unpkg.com/ngraph.graph@20.0.1/dist/ngraph.graph.min.js"></script>
		<script src='https://unpkg.com/ngraph.path@1.3.1/dist/ngraph.path.min.js'></script>
		<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.min.js"></script>-->
		<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.138.3/three.min.js" integrity="sha512-AULygUpzXeEwzx9VCz35G2O8dW4DZzBlj7+kiVTgWTAKAEbxAMKhr53ze2w1W1g48H5mkbUDj8aQ0F+2LOxblQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->
		<script src="jquery.mousewheel.js"></script>
		<script src="SteppedAction.js"></script>
		<script src="planet-generator.js"></script>
		<script src="geometry.js"></script>
		<script src="ui-handlers.js"></script>
		<script src="utilities.js"></script>
		<script src="elevation-generation.js"></script>
		<script src="rendering-3d.js"></script>
		<script src="weather-generation.js"></script>
		<script src="ui-initialization.js"></script>
		<script src="path-finding.js"></script>
		<script src="generatePlanetTerrain_functions.js"></script>
		<script src="generatePlanetRenderData_functions.js"></script>
		<script src="debug-overlay.js"></script>
		<script src="text-labels.js"></script>
		<!--<script src="lodash.js"></script>-->
		<link rel="stylesheet" type="text/css" href="planet-generator.css" />
		<link rel="stylesheet" type="text/css" href="debug-overlay.css" />
			<!-- 
			<link rel="icon" href="/favicon-16.png" sizes="16x16">
			<link rel="icon" href="/favicon-32.png" sizes="32x32">
			<link rel="icon" href="/favicon-48.png" sizes="48x48">
			<link rel="icon" href="/favicon-64.png" sizes="64x64">
			<link rel="icon" href="/favicon-96.png" sizes="96x96">
			<link rel="icon" href="/favicon-128.png" sizes="128x128">
			
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-47237828-1', 'experilous.com');
			ga('send', 'pageview');
		</script>
		-->
		<style>
		</style>
	</head>
	<body>
		<div id="viewportFrame" style="background-color:black;"></div>
		<!--<div id="viewportFrame" style="background-image: url('star-background.png'); background-repeat: repeat;"></div>-->
		<div id="terrainColorPanel" class="panel" style="position: absolute; left: 1em; top: 1em; width: 24em; display: none; padding: 1em;">
			<!-- Header with Export Button -->
			<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1em;">
				<h2 style="margin: 0; font-size: 110%;">Terrain Color System</h2>
				<button id="exportColorsButton" style="font-size: 75%; padding: 0.25em 0.5em;" title="Copy color initialization code to clipboard">Export Colors</button>
			</div>
			
			<!-- Ocean Section -->
			<div style="margin-bottom: 1em;">
				<h3 style="margin: 0 0 0.5em 0; font-size: 100%; border-bottom: 1px solid #89B; padding-bottom: 0.25em;">Ocean</h3>
				<div style="display: grid; grid-template-columns: 4em 1fr 1fr; gap: 0.5em; align-items: center;">
					<div></div>
					<div style="text-align: center; font-size: 85%;">Warm</div>
					<div style="text-align: center; font-size: 85%;">Cold</div>
					
					<div style="font-size: 85%;">Surface</div>
					<input type="color" id="oceanSurfaceWarm" value="#27efff" style="height: 2em; cursor: pointer; border: none; border-radius: 0.25em;">
					<input type="color" id="oceanSurfaceCold" value="#1ba3cc" style="height: 2em; cursor: pointer; border: none; border-radius: 0.25em;">
					
					<div style="font-size: 85%;">Deep</div>
					<input type="color" id="oceanDeepWarm" value="#072995" style="height: 2em; cursor: pointer; border: none; border-radius: 0.25em;">
					<input type="color" id="oceanDeepCold" value="#222d5e" style="height: 2em; cursor: pointer; border: none; border-radius: 0.25em;">
				</div>
			</div>
			
			<!-- Land Section -->
			<div>
				<h3 style="margin: 0 0 0.5em 0; font-size: 100%; border-bottom: 1px solid #89B; padding-bottom: 0.25em;">Land</h3>
				<div style="display: grid; grid-template-columns: 4em 1fr 1fr; gap: 0.5em; align-items: center;">
					<div></div>
					<div style="text-align: center; font-size: 85%;">Dry</div>
					<div style="text-align: center; font-size: 85%;">Wet</div>
					
					<div style="font-size: 85%;">Low</div>
					<input type="color" id="landLowDry" value="#cccc66" style="height: 2em; cursor: pointer; border: none; border-radius: 0.25em;">
					<input type="color" id="landLowWet" value="#005000" style="height: 2em; cursor: pointer; border: none; border-radius: 0.25em;">
					
					<div style="font-size: 85%;">High</div>
					<input type="color" id="landHighDry" value="#777788" style="height: 2em; cursor: pointer; border: none; border-radius: 0.25em;">
					<input type="color" id="landHighWet" value="#444455" style="height: 2em; cursor: pointer; border: none; border-radius: 0.25em;">
					
					<div style="font-size: 85%;">Cold</div>
					<input type="color" id="landCold" value="#555544" style="height: 2em; cursor: pointer; border: none; border-radius: 0.25em;">
					<div></div> <!-- Empty cell to maintain grid -->
				</div>
			</div>
		</div>
		
		<!--<div id="helpPanel" class="panel" style="position: absolute; left: 1em; top: 1em; width: 30em; height: 13em;">
			<h2 style="top: 0.5em; width: 10em;">Move Camera</h2>
			<div style="position: absolute; left: 0.5em; right: 0.5em; top: 2.0em; height: 3.5em;">
				<div class="key">&#8679;</div><div class="key">&#8678;</div><div class="key">&#8681;</div><div class="key">&#8680;</div><br>
				<div class="key">W</div><div class="key">A</div><div class="key">S</div><div class="key">D</div><br>
				<div class="key">Z</div><div class="key">Q</div><div class="key">S</div><div class="key">D</div>
			</div>
			<h2 style="top: 0.5em; left: 11.0em;">Zoom Camera</h2>
			<div style="position: absolute; left: 11.0em; right: 0.5em; top: 2.0em; height: 3.5em;">
				<div class="key" style="float: right; width: 3.5em; height: 3.5em; padding: 0.5em 0.25em;">Mouse Wheel</div>
				<div class="big-key">Page Up</div><div class="big-key">Numpad +</div><br>
				<div class="big-key">Page Down</div><div class="big-key">Numpad -</div><br>
			</div>
			<h2 style="top: 9.0em; left: 0.5em; width: 10em;">Show/Hide Interface</h2>
			<div style="position: absolute; left: 0.5em; width: 29em; top: 10.5em; height: 1.5em;">
				<div class="key">0</div><div class="key">/</div>
			</div>
			<h2 style="top: 8.0em; left: 11.0em;">Generate New Planet</h2>
			<div style="position: absolute; left: 11.0em; right: 0.5em; top: 9.25em; height: 1.5em;">
				<div class="key-desc" style="width: calc(3em / 0.75);">(low)</div><div class="key-desc" style="width: calc(3em / 0.75);">(med)</div><div class="key-desc" style="width: calc(3em / 0.75);">(high)</div><div class="key-desc" style="float: right; width: calc(6em / 0.75);">(current detail)</div>
			</div>
			<div style="position: absolute; left: 11.0em; right: 0.5em; top: 10.5em; height: 1.5em;">
				<div class="big-key" style="min-width: 3em;">1</div><div class="big-key" style="min-width: 3em;">2</div><div class="big-key" style="min-width: 3em;">3</div><div class="big-key" style="float: right;">Spacebar</div>
			</div>
		</div>-->

		<div id="controlPanel" class="panel" style="position: absolute; left: 1em; bottom: 1em; width: 30em; display: none; padding: 1em;">
			<!-- Projection Display Options -->
			<div style="margin-bottom: 1em;">
				<h2 style="margin: 0 0 0.5em 0; font-size: 110%; border-bottom: 1px solid #89B; padding-bottom: 0.25em;">Projection Display Options</h2>
				<div id="projectionDisplayList" class="toggleButtonList onlyOne" style="margin: 0;">
					<button id="projectGlobe" title="Project as Globe">Globe (G)</button>
					<button id="projectRaisedGlobe" title="Toggle 3D Elevation Exaggeration">Raised Globe (H)</button>
					<button id="projectMercatorMap" title="Project as Mercator Map">Mercator Map (J)</button>
				</div>
			</div>

			<!-- Surface Color Overlay -->
			<div style="margin-bottom: 1em;">
				<h2 style="margin: 0 0 0.5em 0; font-size: 110%; border-bottom: 1px solid #89B; padding-bottom: 0.25em;">Surface Color Overlay</h2>
				<select id="colorOverlayDropdown" title="Select color overlay mode" style="width: 100%; height: 1.8em; background-color: rgba(16, 32, 64, 1); color: #FFFFFF; border: none; border-radius: 0.25em; padding: 0.25em; font-size: 90%;">
					<!-- Options will be populated dynamically -->
				</select>
			</div>

			<!-- Overlay Display Options -->
			<div style="margin-bottom: 1em;">
				<h2 style="margin: 0 0 0.5em 0; font-size: 110%; border-bottom: 1px solid #89B; padding-bottom: 0.25em;">Overlay Display Options</h2>
				<div id="extrasDisplayList" class="toggleButtonList" style="margin: 0;">
					<button id="showSunlightButton" title="Show Sunlight" style="font-size: 75%;">Sun (U)</button>
					<button id="showRiversButton" title="Show Rivers" style="font-size: 75%;">Rivers (R)</button>
					<button id="showAirCurrentsButton" title="Show Air Currents" style="font-size: 75%;">Air Currents (P)</button>
				</div>
			</div>

			<!-- Planet Generation -->
			<div>
				<h2 style="margin: 0 0 0.5em 0; font-size: 110%; border-bottom: 1px solid #89B; padding-bottom: 0.25em;">Planet Generation</h2>
				<div style="display: flex; align-items: flex-start; gap: 1em;">
					<div style="flex: 1;">
						<div style="display: flex; align-items: center; margin-bottom: 0.5em; gap: 0.75em;">
							<div style="font-size: 85%; width: 5em; flex-shrink: 0;">Raw Seed:</div>
							<div style="flex: 1; background-color: rgba(0, 0, 0, 0.2); border-radius: 0.25em; height: 1.5em;">
								<input type="text" id="rawSeedLabel" style="width: 100%; height: 100%; border: none; background: none; color: #FFFFFF; text-align: left; padding: 0 0.5em; font-size: 80%;">
							</div>
						</div>
						<div style="display: flex; align-items: center; gap: 0.75em;">
							<div style="font-size: 85%; width: 5em; flex-shrink: 0;">Original:</div>
							<div style="flex: 1; background-color: rgba(0, 0, 0, 0.2); border-radius: 0.25em; height: 1.5em;">
								<input type="text" id="originalSeedLabel" style="width: 100%; height: 100%; border: none; background: none; color: #FFFFFF; text-align: left; padding: 0 0.5em; font-size: 80%;">
							</div>
						</div>
					</div>
					<button id="advancedSettingsButton" style="height: 3.5em; padding: 0.5em 0.8em; margin: 0; font-size: 85%;" title="Configure advanced settings for planet generation.">Advanced</button>
				</div>
			</div>
		</div>

		<!-- FPS overlay - subtle top-right corner display -->
		<div id="fpsOverlay" style="position: absolute; top: 1em; right: 1em; color: rgba(255, 255, 255, 0.6); font-family: 'Courier New', monospace; font-size: 12px; z-index: 1000; pointer-events: none; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8); display: none;">
			<span id="fpsCounter">FPS: --</span>
		</div>
		
		<div id="generationSettingsPanel" class="panel" style="position: absolute; left: calc(50% - 20em); right: calc(50% - 20em); top: calc(50% - 11em); bottom: calc(50% - 11em); background-color: rgba(32, 64, 128, 1);">
			<h2 style="top: 0.5em;">Tile Topology Settings</h2>
			<div style="position: absolute; left: 0.5em; width: 19em; top: 2.0em; height: 2.5em;">
				<div id="detailLevelLabel" style="position: absolute; left: 0; right: 0; top: 0; height: calc(1em / 0.75); text-align: center; font-size: 75%; ">Detail Level (20)</div>
				<input id="detailLevelRange" type="range" style="position: absolute; right: 0; width: 100%; top: 1em; height: 1.5em; font-size: 100%;" min="4" max="100" step="1" value="20"></input>
			</div>
			<div style="position: absolute; right: 0.5em; width: 19em; top: 2.0em; height: 2.5em;">
				<div id="distortionLevelLabel" style="position: absolute; left: 0; right: 0; top: 0; height: calc(1em / 0.75); text-align: center; font-size: 75%; ">Distortion Level (100%)</div>
				<input id="distortionLevelRange" type="range" style="position: absolute; right: 0; width: 100%; top: 1em; height: 1.5em; font-size: 100%;" min="0" max="100" step="1" value="100"></input>
			</div>

			<h2 style="top: 5.5em;">Terrain Generation Settings</h2>
			<div style="position: absolute; left: 0.5em; width: 19em; top: 7.0em; height: 2.5em;">
				<div style="position: absolute; left: 0; right: 0; top: 0; height: calc(1em / 0.75); text-align: center; font-size: 75%; ">Tectonic Plate Count (<span id="tectonicPlateCountLabel">30</span>)</div>
				<input id="tectonicPlateCountRange" type="range" style="position: absolute; right: 0; width: 100%; top: 1em; height: 1.5em; font-size: 100%;" min="0" max="300" step="1" value="44"></input>
			</div>
			<div style="position: absolute; right: 0.5em; width: 19em; top: 7.0em; height: 2.5em;">
				<div style="position: absolute; left: 0; right: 0; top: 0; height: calc(1em / 0.75); text-align: center; font-size: 75%; ">Oceanic Rate (<span id="oceanicRateLabel">70</span>%)</div>
				<input id="oceanicRateRange" type="range" style="position: absolute; right: 0; width: 100%; top: 1em; height: 1.5em; font-size: 100%;" min="0" max="100" step="1" value="70"></input>
			</div>
			<div style="position: absolute; left: 0.5em; width: 19em; top: 10.0em; height: 2.5em;">
				<div style="position: absolute; left: 0; right: 0; top: 0; height: calc(1em / 0.75); text-align: center; font-size: 75%; ">Heat Level (<span id="heatLevelLabel">0</span>%)</div>
				<input id="heatLevelRange" type="range" style="position: absolute; right: 0; width: 100%; top: 1em; height: 1.5em; font-size: 100%;" min="-100" max="100" step="1" value="0"></input>
			</div>
			<div style="position: absolute; right: 0.5em; width: 19em; top: 10.0em; height: 2.5em;">
				<div style="position: absolute; left: 0; right: 0; top: 0; height: calc(1em / 0.75); text-align: center; font-size: 75%; ">Moisture Level (<span id="moistureLevelLabel">0</span>%)</div>
				<input id="moistureLevelRange" type="range" style="position: absolute; right: 0; width: 100%; top: 1em; height: 1.5em; font-size: 100%;" min="-100" max="100" step="1" value="0"></input>
			</div>

			<h2 style="top: 13.5em;">Miscellaneous Settings</h2>
			<div style="position: absolute; left: 0.5em; width: calc(100% - 1em); top: 15.0em; height: 2.5em;">
				<div style="position: absolute; left: 0; right: 0; top: 0; height: calc(1em / 0.75); text-align: center; font-size: 75%; ">Pseudorandom Seed (Integer or Text)</div>
				<input id="seedTextBox" type="text" style="position: absolute; right: 0; width: 100%; top: 1em; height: 1.5em; font-size: 100%;" value=""></input>
			</div>

			<button id="advancedGeneratePlanetButton" style="position: absolute; left: calc(40% - 10em / 0.8); width: calc(10em / 0.8); top: calc(18.5em / 0.8); height: calc(2.5em / 0.8); margin: 0;" title="Generate a new planet with the indicated advanced settings.">Generate</button>
			<button id="advancedCancelButton" style="position: absolute; right: calc(40% - 10em / 0.8); width: calc(10em / 0.8); top: calc(18.5em / 0.8); height: calc(2.5em / 0.8); margin: 0;" title="Hide the advanced settings dialog and do not generate a planet.">Cancel</button>
		</div>
		
		<div id="progressPanel" class="panel">
			<div id="progressActionLabel"></div>
			<div id="progressBarFrame">
				<div id="progressBar"></div>
				<div id="progressBarLabel"></div>
			</div>
			<button id="progressCancelButton">Cancel</button>
		</div>
	</body>
</html>